import express from 'express';
import QiwiBillPaymentsAPI from '@qiwi/bill-payments-node-js-sdk'
import cors from 'cors'
import TelegramBot from 'node-telegram-bot-api'


const token = '5701264991:AAFa6BXjBWI5DR6OZr53OgXYUpsidA5WUEg'
export const bot = new TelegramBot(token, {polling: true})
const SECRET_KEY = 'eyJ2ZXJzaW9uIjoiUDJQIiwiZGF0YSI6eyJwYXlpbl9tZXJjaGFudF9zaXRlX3VpZCI6Im0xcGY4OS0wMCIsInVzZXJfaWQiOiI3OTM4ODY5MTkyNyIsInNlY3JldCI6ImE3YTdiZmY4Yzc5OTA5ZjhjZDVmYjAxMGE1OWNlOGQ5MmM3ZGNhOTJkODA0OWRkM2ZhOTY0N2QwNzZiOTI3ZDgifX0=';
const qiwiApi = new QiwiBillPaymentsAPI(SECRET_KEY);
const publicKey = '48e7qUxn9T7RyYE1MVZswX1FRSbE6iyCj2gCRwwF3Dnh5XrasNTx3BGPiMsyXQFNKQhvukniQG8RTVhYm3iPuajXbgBuWD7dsZ3zu2WJ5P5mSMPzbxuGLLAmHDD6AwbsshS42LLYp2BesJZBBHMr9BfLJRqvHGLq1UooF3rJGe8EHrZ6qkYLwKAEmyjQn';

let person = ''

const data = [
    {id: 'Valeriya', name: '–í–∞–ª–µ—Ä–∏—è', title: '–ö—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ —Å –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–∫—É–ª–∞–º–∏ ‚ò∫', services: '–ö–ª–∞—Å—Å–∏–∫–∞\n–ê–Ω–∞–ª\n–ú–∏–Ω–µ—Ç\n–ú–∞—Å—Å–∞–∂\n–ë–µ–∑ –ø—Ä–µ–∑–µ—Ä–≤–∞—Ç–∏–≤–∞ / –° –ø—Ä–µ–∑–µ—Ä–≤–∞—Ç–∏–≤–æ–º', h: '2500', h2: '5000', night: '7500'},
    {id: 'Kseniya', name: '–ö—Å–µ–Ω–∏—è', title: '–ú–∏–ª–∞—è, –æ—á–∞—Ä–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§\n–ö–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –ø–æ—à–∞–ª–∏—Ç—å ü§´', services: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–µ–∫—Å —Å —Ä–µ–∑–∏–Ω–∫–æ–π ü•∞\n–°–µ–∫—Å –±–µ–∑ —Ä–µ–∑–∏–Ω–∫–∏ (–ª—é–±—ã–µ –ø–æ–∑—ã)\n–ì–ª—É–±–æ–∫–∏–π –º–∏–Ω–µ—Ç (–∫—É–Ω–∏ –ø–æ –∂–µ–ª–∞–Ω–∏—é)', h: '3000', h2: '6000', night: '9000'},
    {id: 'Karina23', name: '–ö–∞—Ä–∏–Ω–∞', title: '–ú–æ–ª–æ–¥–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, –∑–∞–±–æ—Ç–ª–∏–≤–∞—è, –±–µ–∑ –±–æ–ª–µ–∑–Ω–µ–π', services: '', h: '2500', h2: '5000', night: '7500'},
    {id: 'Alica', name: '–ê–ª–∏—Å–∞', title: '–ú–æ–ª–æ–¥–∞—è, –ö—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞', services: '–ö–ª–∞—Å–∏–∫–∞, –∞–Ω–∞–ª, –º–∏–Ω–µ—Ç', h: '2000', h2: '4000', night: '6000'},
    {id: 'Dariya', name: '–î–∞—Ä—å—è', title: '–ù–∞—à –≤–µ—á–µ—Ä –ø–æ–º–æ–∂–µ—Ç –∑–∞–±—ã—Ç—å —Ç–µ–±–µ –æ –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö –Ω–µ –Ω–∞—Å—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Öü•∞üî•üíñüíñüíñ', services: '–≠—Ä–æ—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂, –º–∏–Ω–µ—Ç, –∞–Ω–∞–ª –∏ –∫–ª–∞—Å—Å–∏–∫–∞üòâüî•\n–ü–æ –∂–µ–ª–∞–Ω–∏—é –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ë–î–°–úüîûüíï', h: '3000', h2: '6000', night: '9000'},
    {id: 'Angelina', name: '–ê–Ω–≥–µ–ª–∏–Ω–∞', title: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–µ–∫—Å, –ú–∏–Ω–µ—Ç –±–µ–∑ —Ä–µ–∑–∏–Ω–∫–∏', services: '–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–µ–∫—Å, –ê–Ω–∞–ª, –ë–î–°–ú', h: '3000', h2: '6000', night: '9000'},
    {id: 'Marina', name: '–ú–∞—Ä–∏–Ω–∞', title: '–ú–æ–ª–æ–¥–∞—è, –æ–ø—ã—Ç–Ω–∞—è.', services: '–î–æ–≤–æ–∂—É –¥–æ –æ—Ä–≥–∞–∑–º–∞ —Å –∫–∞–π—Ñ–æ–º, –º–æ–∂–µ–º –≤—ã–ø–∏—Ç—å)', h: '3000', h2: '6000', night: '9000'},
    {id: 'Lika', name: '–õ–∏–∫–∞', title: '–ú–æ–ª–æ–¥–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, –µ—Å—Ç—å —Å–ø—Ä–∞–≤–∫–∏ –æ —Ç–æ–º —á—Ç–æ —è –∑–¥–æ—Ä–æ–≤–∞.', services: '–¢—ã –∑–∞–ø–æ–º–Ω–∏—à—å —ç—Ç–æ –≤—Ä–µ–º—è –Ω–∞ –¥–æ–ª–≥–æ üî•', h: '2500', h2: '5000', night: '7500'},
    {id: 'Elena', name: '–ï–ª–µ–Ω–∞', title: '–ú–æ–ª–æ–¥–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, —Å–ø–æ—Ä—Ç–∏–≤–Ω–∞—è üòú', services: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–µ–∫—Å (—Å –∑–∞—â–∏—Ç–æ–π)\n–ê–Ω–∞–ª—å–Ω—ã–π —Å–µ–∫—Å, –¥–æ–ø–ª–∞—Ç–∞ (—Å –∑–∞—â–∏—Ç–æ–π/–±–µ–∑)\n–û—Ä–∞–ª—å–Ω—ã–π —Å–µ–∫—Å/–º–∏–Ω–µ—Ç', h: '7000', h2: '14000', night: '21000'},
    {id: 'Katya', name: '–ö–∞—Ç—è', title: '–ö—Ä–∞—Å–æ—Ç–∫–∞, –ª—é–±–ª—é –±—Ä–∞—Ç—å –≤ —Ä–æ—Ç–∏–∫, –∂–¥—É –≤–∞—Å –∑–∞–π–∫–∏üòò', services: '–õ—é–±–ª—é —Å–æ—Å–∞—Ç—åüòç, –º–æ–≥—É –≤ –ª—é–±—ã—Ö –ø–æ–∑–∞—Öüòä', h: '2500', h2: '5000', night: '7500'},
    {id: 'Yulia', name: '–Æ–ª—è', title: '–ú–æ–ª–æ–¥–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, —ç–∫—Å—Ç—Ä–∞–≤–∞–≥–∞–Ω—Ç–Ω–∞—è', services: '–ú–∏–Ω–µ—Ç, –∞–Ω–∞–ª, –≤—Å–µ –≤–∫–ª—é—á–µ–Ω–æ üíãüî•', h: '3000', h2: '6000', night: '9000'},
    {id: 'Sofa', name: '–°–æ—Ñ–∏—è', title: '–ö—Ä–∞—Å–∏–≤–∞—è, –≥–∏–±–∫–∞—èüòú, –º–Ω–æ–≥–æ–µ —É–º–µ—éüòâ', services: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–µ–∫—Å (—Å –∑–∞—â–∏—Ç–æ–π)\n–ú–∏–Ω–µ—Ç –±–µ–∑ —Ä–µ–∑–∏–Ω–∫–∏\n–û—Å—Ç–∞–ª—å–Ω–æ–µ —Å –¥–æ–ø–ª–∞—Ç–æ–π', h: '2500', h2: '5000', night: '7500'},
    {id: 'Andgelika', name: '–ê–Ω–¥–∂–µ–ª–∏–∫–∞', title: '–ü–æ–º–æ–≥—É —Ç–µ–±–µ —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è, –ª—é–±–ª—é –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å‚ò∫', services: '–û–±–æ–∂–∞—é –¥–µ–ª–∞—Ç—å –º–∏–Ω–µ—Çü•∞, –ø–æ–∑–≤–æ–ª—è—é –¥–µ–ª–∞—Ç—å –≤—Å—ëüíã', h: '3000', h2: '6000', night: '9000'},
]


const createPayment = async (value, account) => {
    const billId = qiwiApi.generateId();

    const params = {
        publicKey,
        amount: Number(value),
        billId: billId,
        successUrl: 'https://t.me/deluxe_girls_bot',
        account: account,
    };

    const link = await qiwiApi.createPaymentForm(params);
    return link;
}


bot.onText(/\/start/, function onStart(msg) {
    const opts = {
        reply_markup: {
            inline_keyboard: [
                [{text: '–ü—Ä–æ—Ñ–∏–ª—å üîß', callback_data: 'profile'}, {
                    text: '–ê–Ω–∫–µ—Ç—ã üíö',
                    callback_data: 'girls'
                }, {text: '–û –Ω–∞—Å ‚ùî', callback_data: 'about'}],
                [{text: '–¢–µ—Ö. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ üÜò', url: 'https://t.me/DeluxeGirls_Support'}, {
                    text: '–û—Ç–∑—ã–≤—ã üßæ',
                    url: 'https://t.me/DeluxeGirlsReviews'
                }],
            ]
        },
        parse_mode: 'Markdown'
    };
    bot.sendMessage(msg.from.id, `*${msg.chat.first_name}*, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ *Deluxe Girls* üíö
    
–£ –Ω–∞—Å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –ª—É—á—à–∏—Ö –¥–µ–≤–æ—á–µ–∫ –¥–ª—è –∏–Ω—Ç–∏–º–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á.

–í—ã–¥–∞—á–∞ –∞–¥—Ä–µ—Å–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∏–ª–∏, –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö, —á–µ—Ä–µ–∑ –∫—É—Ä–∞—Ç–æ—Ä–∞!

–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–π –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–¥—Ä–µ—Å Telegram, –æ—Å—Ç–µ—Ä–µ–≥–∞–π—Ç–µ—Å—å –º–æ—à–µ–Ω–Ω–∏–∫–æ–≤, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–∞—Å! üòé`, opts);
});


bot.on('callback_query', async function onCallbackQuery(callbackQuery) {
    const action = callbackQuery.data;
    const msg = callbackQuery.message;
    const opts = {
        chat_id: msg.chat.id,
        message_id: msg.message_id,
        reply_markup: {
            inline_keyboard: [
                [{text: '–ü—Ä–æ—Ñ–∏–ª—å üîß', callback_data: 'profile'}, {
                    text: '–ê–Ω–∫–µ—Ç—ã üíö',
                    callback_data: 'girls'
                }, {text: '–û –Ω–∞—Å ‚ùî', callback_data: 'about'}],
                [{text: '–¢–µ—Ö. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ üÜò', url: 'https://t.me/DeluxeGirls_Support'}, {
                    text: '–û—Ç–∑—ã–≤—ã üßæ',
                    url: 'https://t.me/DeluxeGirlsReviews'
                }],
            ]
        },
        parse_mode: 'Markdown'
    };
    let text;

    if (action === 'profile') {
        text = 'üë§ *–ü—Ä–æ—Ñ–∏–ª—å*\n\n' +
            `‚ùáÔ∏è –í–∞—à Telegram ID: [[${msg.chat.id}]]\n` +
            `‚ú≥Ô∏è –í–∞—à –ª–æ–≥–∏–Ω: [@${msg.chat.username}]`;
        bot.deleteMessage(msg.chat.id, msg.message_id)
        bot.sendVideo(msg.chat.id, 'profile.mp4', {
            caption: text,
            chat_id: msg.chat.id,
            message_id: msg.message_id,
            reply_markup: {
                inline_keyboard: [
                    [{text: '–ü—Ä–æ—Ñ–∏–ª—å üîß', callback_data: 'profile'}, {
                        text: '–ê–Ω–∫–µ—Ç—ã üíö',
                        callback_data: 'girls'
                    }, {text: '–û –Ω–∞—Å ‚ùî', callback_data: 'about'}],
                    [{text: '–¢–µ—Ö. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ üÜò', url: 'https://t.me/DeluxeGirls_Support'}, {
                        text: '–û—Ç–∑—ã–≤—ã üßæ',
                        url: 'https://t.me/DeluxeGirlsReviews'
                    }],
                ]
            },
            parse_mode: 'Markdown'
        })
    }
    if (action === 'about') {
        bot.deleteMessage(msg.chat.id, msg.message_id)
        bot.sendMessage(msg.chat.id, `‚ùî *–û –Ω–∞—Å*

–ù–∞—à –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–º–æ—â–∏ –≤ –±—ã—Å—Ç—Ä–æ–º –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–º –ø–æ–∏—Å–∫–µ.
–¢–µ–ø–µ—Ä—å –Ω–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–∏–ª –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—É–≥–∞.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —Ç–µ–ø–µ—Ä—å –≤—ã–±–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—â–µ.

–ó–∞—á–µ–º –≤–∞–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –Ω–∞ –ø—É—Ç–∏ –∫ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—é?

–û—Ç–¥–µ–ª—å–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–æ, —á—Ç–æ –º—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–º –ø—Ä–∞–≤–æ –ø–æ–ª–Ω–æ–π –∞–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.`, opts);
    }

    if (action === 'girls') {
        bot.deleteMessage(msg.chat.id, msg.message_id)
        bot.sendMessage(msg.chat.id, 'üíö *–ê–Ω–∫–µ—Ç—ã –Ω–∞—à–∏—Ö –¥–µ–≤–æ—á–µ–∫*\n' +
            '\n' +
            'üëã –°–≤–æ–±–æ–¥–Ω—ã —Å–µ–π—á–∞—Å: *13*',
            {
                chat_id: msg.chat.id,
                message_id: msg.message_id,
                reply_markup: {
                    inline_keyboard: [
                        [{text: '–í–∞–ª–µ—Ä–∏—è 24 –ì–æ–¥–∞', callback_data: 'Valeriya'}],
                        [{text: '–ö—Å–µ–Ω–∏—è 22 –ì–æ–¥–∞', callback_data: 'Kseniya'}],
                        [{text: '–ö–∞—Ä–∏–Ω–∞ 23 –ì–æ–¥–∞', callback_data: 'Karina23'}],
                        [{text: '–ê–ª–∏—Å–∞ 19 –õ–µ—Ç', callback_data: 'Alica'}],
                        [{text: '–î–∞—Ä—å—è 22 –ì–æ–¥–∞', callback_data: 'Dariya'}],
                        [{text: '–ê–Ω–≥–µ–ª–∏–Ω–∞ 20 –õ–µ—Ç', callback_data: 'Angelina'}],
                        [{text: '–ú–∞—Ä–∏–Ω–∞ 18 –õ–µ—Ç', callback_data: 'Marina'}],
                        [{text: '–õ–∏–∫–∞ 21 –ì–æ–¥', callback_data: 'Lika'}],
                        [{text: '–ï–ª–µ–Ω–∞ 23 –ì–æ–¥–∞', callback_data: 'Elena'}],
                        [{text: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ 22 –ì–æ–¥–∞', callback_data: 'Katya'}],
                        [{text: '–Æ–ª—è 21 –ì–æ–¥', callback_data: 'Yulia'}],
                        [{text: '–°–æ—Ñ–∏—è 21 –ì–æ–¥', callback_data: 'Sofa'}],
                        [{text: '–ê–Ω–¥–∂–µ–ª–∏–∫–∞ 24 –ì–æ–¥–∞', callback_data: 'Andgelika'}],
                        [{text: '–í–µ—Ä–Ω—É—Ç—å—Å—è ‚Ü©Ô∏è', callback_data: 'main'}],
                    ]
                },
                parse_mode: 'Markdown'
            })
    }

    if (action === 'main') {
        bot.deleteMessage(msg.chat.id, msg.message_id)
        bot.sendMessage(msg.chat.id, `*${msg.chat.first_name}*, –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ *Deluxe Girls* üíö
    
–£ –Ω–∞—Å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –ª—É—á—à–∏—Ö –¥–µ–≤–æ—á–µ–∫ –¥–ª—è –∏–Ω—Ç–∏–º–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á.

–í—ã–¥–∞—á–∞ –∞–¥—Ä–µ—Å–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –∏–ª–∏, –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö, —á–µ—Ä–µ–∑ –∫—É—Ä–∞—Ç–æ—Ä–∞!

–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–π –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞–¥—Ä–µ—Å Telegram, –æ—Å—Ç–µ—Ä–µ–≥–∞–π—Ç–µ—Å—å –º–æ—à–µ–Ω–Ω–∏–∫–æ–≤, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–∞—Å! üòé`, opts);
    }

    if (action === 'Valeriya' || action === 'Kseniya' || action === 'Karina23' ||
        action === 'Alica' || action === 'Dariya' || action === 'Angelina' ||
        action === 'Marina' || action === 'Lika' || action === 'Elena' ||
        action === 'Katya' || action === 'Yulia' || action === 'Sofa' ||
        action === 'Andgelika') {
        person = action;
        bot.deleteMessage(msg.chat.id, msg.message_id)
        bot.sendPhoto(msg.chat.id, `images/${action}.jpg`, {
            caption: `üÜî –í—ã –≤—ã–±—Ä–∞–ª–∏ –¥–µ–≤—É—à–∫—É *${data.find(x => x.id === action).name}*\n` +
                '\n' +
                `üåá –ß–∞—Å: *${data.find(x => x.id === action).h} RUB*\n` +
                `üèôÔ∏è 2 —á–∞—Å–∞: *${data.find(x => x.id === action).h2} RUB*\n` +
                `üåÉ –ù–æ—á—å: *${data.find(x => x.id === action).night} RUB*\n` +
                '\n' +
                '‚ö†Ô∏è –î–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É *–û—Ñ–æ—Ä–º–∏—Ç—å*',
            chat_id: msg.chat.id,
            message_id: msg.message_id,
            reply_markup: {
                inline_keyboard: [
                    [{text: '–û–ø–∏—Å–∞–Ω–∏–µ', callback_data: 'description'}, {text: '–£—Å–ª—É–≥–∏',callback_data: 'services'}],
                    [{text: '–ü–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–µ —Ñ–æ—Ç–æ', callback_data: 'another'}],
                    [{text: '–û—Ñ–æ—Ä–º–∏—Ç—å', callback_data: 'buy'}, {text: '–ù–∞–∑–∞–¥', callback_data: 'girls'}]
                ]
            },
            parse_mode: 'Markdown'
        })
    }

    if(action === 'another') {
        bot.answerCallbackQuery(callbackQuery.id, '–¢–æ–ª—å–∫–æ 1 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è')
    }
    if(action === 'check') {
        bot.answerCallbackQuery(callbackQuery.id, '–í—ã –µ—â—ë –Ω–µ –æ–ø–ª–∞—Ç–∏–ª–∏!')
    }
    if(action === 'description') {
        bot.answerCallbackQuery(callbackQuery.id, data.find(x => x.id === person).title, true)
    }
    if(action === 'services') {
        bot.answerCallbackQuery(callbackQuery.id, data.find(x => x.id === person).services, true)
    }
    if(action === 'buy') {

        const link = await createPayment(data.find(x => x.id === person).h, msg.chat.id)
        const link2 = await createPayment(data.find(x => x.id === person).h2, msg.chat.id)
        const link3 = await createPayment(data.find(x => x.id === person).night, msg.chat.id)

        bot.editMessageCaption(`üÜî –í—ã –≤—ã–±—Ä–∞–ª–∏ –¥–µ–≤—É—à–∫—É *${data.find(x => x.id === person).name}*\n` +
            '\n' +
            `üåá –ß–∞—Å: *${data.find(x => x.id === person).h} RUB*\n` +
            `üèôÔ∏è 2 —á–∞—Å–∞: *${data.find(x => x.id === person).h2} RUB*\n` +
            `üåÉ –ù–æ—á—å: *${data.find(x => x.id === person).night} RUB*\n` +
            '\n' +
            'üí≥ –î–ª—è –æ–ø–ª–∞—Ç—ã –∫–∞—Ä—Ç–æ–π –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø–ª–∞—Ç—É –∫–∞—Ä—Ç–æ–π' +
            '\n\n' +
            '‚ö† –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è *—Å—Ç—Ä–æ–≥–æ —á–µ—Ä–µ–∑ –±–æ—Ç–∞*', {
            chat_id: msg.chat.id,
            message_id: msg.message_id,
            reply_markup: {
                inline_keyboard: [
                    [{text: '–ß–∞—Å', url: link}, {text: '–î–≤–∞ —á–∞—Å–∞', url: link2}, {text: '–ù–æ—á—å', url: link3}],
                    [{text: '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É', callback_data: 'check'}],
                    [{text: '–ù–∞–∑–∞–¥', callback_data: 'girls'}]
                ]
            },
            parse_mode: 'Markdown'
        })
    }
});
bot.on("polling_error", console.log);
const app = express();
app.use(express.json());
app.use(cors());


app.listen(process.env.PORT || 4444, (err) => {
    if (err) {
        return console.log(err);
    }
    console.log('Server OK')
})